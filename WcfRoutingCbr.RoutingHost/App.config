<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5.2" />
  </startup>
  <system.serviceModel>
    <services>
      <service name="System.ServiceModel.Routing.RoutingService" >
        <endpoint address="net.tcp://localhost:40005/GeoServiceRouter"
                  binding="netTcpBinding"
                  contract="System.ServiceModel.Routing.IRequestReplyRouter"
                  name ="GeoServiceRouter1"
                  />
      </service>
    </services>
    <routing>
      <filters>
        <!--Router의 Endpoint명칭이 GeoServiceRouter1 이면 Matched!-->
        <filter name="If_Router_EndpointName_Is_GeoServiceRouter1_Then" filterType="EndpointName" filterData="GeoServiceRouter1" />
      </filters>
      <filterTables>
        <filterTable name="GetServiceRoutingTable1">
          <add filterName="If_Router_EndpointName_Is_GeoServiceRouter1_Then" endpointName="GeoService"/>
        </filterTable>
      </filterTables>
    </routing>
    <!-- Routing서비스는 다른 최종서비스들에 대한 client 이므로 client section이 필요하다. -->
    <!-- Client항목의 contract='*' 에 유의. 어떤 contract이 오는지는 router에 접근하는 client가 요청한 contract에 의해 결정된다. -->
    <client>
      <endpoint address="net.tcp://localhost:50001/GeoService"
                binding="netTcpBinding"
                contract="*"
                name="GeoService" />
    </client>
    <bindings>
      <netTcpBinding>
        <binding maxReceivedMessageSize="2000000" sendTimeout="01:00:00" />
      </netTcpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <routing filterTableName="GetServiceRoutingTable1"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration>